<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickBite - Food Ordering</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Simple transition for opacity */
        .transition-opacity {
            transition: opacity 0.5s ease-in-out;
        }

        /* --- Order Confirmation Animation Styles --- */
        .checkmark__circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 2;
            stroke-miterlimit: 10;
            stroke: #4ade80; /* green-400 */
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }

        .checkmark {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: block;
            stroke-width: 3;
            stroke: #fff;
            stroke-miterlimit: 10;
            margin: auto;
            box-shadow: inset 0px 0px 0px #4ade80;
            animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
        }

        .checkmark__check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }
        
        /* --- Star Rating Styles --- */
        .star-rating .star {
            color: #d1d5db; /* gray-300 */
            cursor: pointer;
            transition: color 0.2s;
        }
        .star-rating:hover .star {
            color: #f59e0b; /* amber-500 */
        }
        .star-rating .star:hover ~ .star {
            color: #d1d5db; /* gray-300 */
        }
        .star-rating .star.selected,
        .star-rating .star.selected ~ .star {
            color: #f59e0b; /* amber-500 */
        }


        @keyframes stroke {
            100% {
                stroke-dashoffset: 0;
            }
        }

        @keyframes scale {
            0%, 100% {
                transform: none;
            }
            50% {
                transform: scale3d(1.1, 1.1, 1);
            }
        }

        @keyframes fill {
            100% {
                box-shadow: inset 0px 0px 0px 50px #4ade80;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Authentication Container -->
    <div id="auth-container" class="flex items-center justify-center min-h-screen transition-opacity duration-500">
        <div class="w-full max-w-md mx-auto p-4">
            <!-- Login Form -->
            <div id="login-form" class="bg-white p-8 rounded-2xl shadow-lg transition-opacity duration-500">
                <div class="text-center mb-8">
                    <h1 class="text-3xl font-bold text-gray-800">Welcome Back!</h1>
                    <p class="text-gray-500">Sign in to continue your delicious journey.</p>
                </div>

                <form id="login" novalidate>
                    <div id="login-error-message" class="mb-4 text-red-500 text-sm text-center"></div>
                    <div class="mb-4">
                        <label for="login-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                        <input type="email" id="login-email" name="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition" placeholder="you@example.com" required>
                    </div>

                    <div class="mb-6">
                        <label for="login-password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                        <input type="password" id="login-password" name="password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition" placeholder="••••••••" required>
                    </div>

                    <button type="submit" class="w-full bg-orange-500 text-white font-semibold py-3 rounded-lg hover:bg-orange-600 transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500">Login</button>
                </form>

                <p class="text-center text-sm text-gray-600 mt-6">
                    Don't have an account? <button id="show-register-btn" class="font-semibold text-orange-500 hover:underline">Register here</button>
                </p>
            </div>

            <!-- Registration Form -->
            <div id="register-form" class="bg-white p-8 rounded-2xl shadow-lg transition-opacity duration-500 opacity-0 hidden">
                <div class="text-center mb-8">
                    <h1 class="text-3xl font-bold text-gray-800">Create an Account</h1>
                    <p class="text-gray-500">Join us and discover amazing food!</p>
                </div>

                <form id="register" novalidate>
                    <div id="register-error-message" class="mb-4 text-red-500 text-sm text-center"></div>
                    <div class="mb-4">
                        <label for="register-name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                        <input type="text" id="register-name" name="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition" placeholder="John Doe" required>
                    </div>

                    <div class="mb-4">
                        <label for="register-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                        <input type="email" id="register-email" name="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition" placeholder="you@example.com" required>
                    </div>

                    <div class="mb-4">
                        <label for="register-password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                        <input type="password" id="register-password" name="password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition" placeholder="Create a strong password (min. 8 characters)" required>
                    </div>

                    <div class="mb-6">
                        <label for="confirm-password" class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
                        <input type="password" id="confirm-password" name="confirm-password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition" placeholder="Repeat your password" required>
                    </div>

                    <button type="submit" class="w-full bg-orange-500 text-white font-semibold py-3 rounded-lg hover:bg-orange-600 transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500">Register</button>
                </form>

                <p class="text-center text-sm text-gray-600 mt-6">
                    Already have an account? <button id="show-login-btn" class="font-semibold text-orange-500 hover:underline">Login here</button>
                </p>
            </div>
        </div>
    </div>

    <!-- Main Website Content (Initially Hidden) -->
    <div id="main-content" class="hidden opacity-0 transition-opacity duration-500">
        <!-- Header -->
        <header class="bg-white shadow-md sticky top-0 z-10">
            <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
                <a href="#" class="text-2xl font-bold text-orange-500">QuickBite</a>
                <div class="flex items-center space-x-4">
                    <span id="user-greeting" class="text-gray-700 hidden sm:block"></span>
                    <button id="menu-btn" class="text-gray-700 hover:text-orange-500 font-semibold transition">Menu</button>
                    <button id="cart-btn" class="relative text-gray-700 hover:text-orange-500 font-semibold transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </button>
                    <button id="logout-btn" class="bg-orange-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-orange-600 transition">Logout</button>
                </div>
            </nav>
        </header>

        <!-- Menu Section -->
        <main id="menu-section" class="container mx-auto px-6 py-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">What would you like to eat today?</h2>
            
            <div class="mb-8">
                <input type="text" placeholder="Search for restaurants or dishes..." class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition">
            </div>

            <!-- Recommended Section -->
            <section id="recommended-section" class="mb-12">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-2">Chef's Recommendations</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Recommended Item 1 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300">
                        <img src="https://images.unsplash.com/photo-1575546521758-035f3741a35e?q=80&w=1974&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f59e0b/ffffff?text=Paella';" alt="Seafood Paella" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <div class="flex items-center mb-2">
                                <span class="text-yellow-500">⭐ 4.9</span>
                                <span class="ml-2 text-gray-500 text-sm">(250+ ratings)</span>
                            </div>
                            <h4 class="font-bold text-xl mb-2 item-name">Seafood Paella</h4>
                            <p class="text-gray-600 text-sm mb-4">Authentic Spanish paella with fresh shrimp, mussels, and calamari.</p>
                            <div class="flex justify-between items-center item-details">
                                <span class="font-bold text-lg text-orange-500 price" data-price="19.99">$19.99</span>
                                <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-orange-600 transition">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                     <!-- Recommended Item 2 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300">
                        <img src="https://images.unsplash.com/photo-1595908129324-1a8a2094a2dd?q=80&w=1964&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/78350f/ffffff?text=Risotto';" alt="Truffle Risotto" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <div class="flex items-center mb-2">
                                <span class="text-yellow-500">⭐ 4.8</span>
                                <span class="ml-2 text-gray-500 text-sm">(180+ ratings)</span>
                            </div>
                            <h4 class="font-bold text-xl mb-2 item-name">Truffle Risotto</h4>
                            <p class="text-gray-600 text-sm mb-4">Creamy Arborio rice with wild mushrooms and black truffle oil.</p>
                            <div class="flex justify-between items-center item-details">
                                <span class="font-bold text-lg text-orange-500 price" data-price="18.50">$18.50</span>
                                <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-orange-600 transition">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                     <!-- Recommended Item 3 -->
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300">
                        <img src="https://images.unsplash.com/photo-1607013251379-e6eecfffe234?q=80&w=1974&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/dc2626/ffffff?text=Sliders';" alt="Wagyu Sliders" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <div class="flex items-center mb-2">
                                <span class="text-yellow-500">⭐ 4.9</span>
                                <span class="ml-2 text-gray-500 text-sm">(300+ ratings)</span>
                            </div>
                            <h4 class="font-bold text-xl mb-2 item-name">Wagyu Sliders</h4>
                            <p class="text-gray-600 text-sm mb-4">Premium Wagyu beef with truffle aioli on brioche buns.</p>
                            <div class="flex justify-between items-center item-details">
                                <span class="font-bold text-lg text-orange-500 price" data-price="22.00">$22.00</span>
                                <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-orange-600 transition">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <h3 class="text-2xl font-bold text-gray-800 mb-6">Full Menu</h3>
            <div id="food-items-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                
                <!-- Item 1: Pizza -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?q=80&w=2070&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Pizza';" alt="Pizza" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Gourmet Pizza</h3>
                        <p class="text-gray-600 text-sm mb-4">Hand-tossed pizzas with premium ingredients.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                    <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Margherita</h4><span class="text-sm text-gray-500 price" data-price="12.99">$12.99</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Pepperoni</h4><span class="text-sm text-gray-500 price" data-price="14.50">$14.50</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Veggie Supreme</h4><span class="text-sm text-gray-500 price" data-price="13.75">$13.75</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>

                <!-- Item 2: Burger -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1571091718767-18b5b1457add?q=80&w=2072&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Burger';" alt="Burger" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Classic Burgers</h3>
                        <p class="text-gray-600 text-sm mb-4">Juicy beef patties with all the classic fixings.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                    <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Classic Cheeseburger</h4><span class="text-sm text-gray-500 price" data-price="9.99">$9.99</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Bacon & Avocado Burger</h4><span class="text-sm text-gray-500 price" data-price="12.50">$12.50</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>

                <!-- Item 3: Pasta -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1551183053-bf91a1d81141?q=80&w=1915&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Pasta';" alt="Pasta" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Italian Pasta</h3>
                        <p class="text-gray-600 text-sm mb-4">Authentic pasta dishes made with fresh sauces.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                     <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Spaghetti Carbonara</h4><span class="text-sm text-gray-500 price" data-price="15.00">$15.00</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Fettuccine Alfredo</h4><span class="text-sm text-gray-500 price" data-price="14.50">$14.50</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>
                
                <!-- Item 4: Sushi -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?q=80&w=1948&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Sushi';" alt="Sushi" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Sushi Platters</h3>
                        <p class="text-gray-600 text-sm mb-4">Fresh, hand-rolled sushi assortments.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                     <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">California Roll (8 pcs)</h4><span class="text-sm text-gray-500 price" data-price="8.00">$8.00</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Spicy Tuna Roll (8 pcs)</h4><span class="text-sm text-gray-500 price" data-price="9.50">$9.50</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>

                <!-- Item 5: Salad -->
                 <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1512621776951-a57141f2eefd?q=80&w=2070&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Salad';" alt="Salad" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Fresh Salads</h3>
                        <p class="text-gray-600 text-sm mb-4">Crisp and healthy salads with house dressings.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                     <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Caesar Salad</h4><span class="text-sm text-gray-500 price" data-price="7.25">$7.25</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Greek Salad</h4><span class="text-sm text-gray-500 price" data-price="8.50">$8.50</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>
                
                <!-- Item 6: Tacos -->
                 <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1552332386-f8dd00dc2f85?q=80&w=2071&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Tacos';" alt="Tacos" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Street Tacos</h3>
                        <p class="text-gray-600 text-sm mb-4">Authentic tacos on soft corn tortillas.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                     <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Carne Asada Taco</h4><span class="text-sm text-gray-500 price" data-price="3.50">$3.50</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Al Pastor Taco</h4><span class="text-sm text-gray-500 price" data-price="3.25">$3.25</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>

                <!-- Item 7: Steaks -->
                 <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1600891964092-4316c288032e?q=80&w=2070&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Steak';" alt="Steak" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Grilled Steaks</h3>
                        <p class="text-gray-600 text-sm mb-4">Perfectly cooked steaks with choice of sides.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                     <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Ribeye Steak (12oz)</h4><span class="text-sm text-gray-500 price" data-price="28.00">$28.00</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Filet Mignon (8oz)</h4><span class="text-sm text-gray-500 price" data-price="32.50">$32.50</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>

                <!-- Item 8: Sandwiches -->
                 <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1528735602780-2552fd46c7af?q=80&w=2073&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Sandwich';" alt="Sandwich" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Artisan Sandwiches</h3>
                        <p class="text-gray-600 text-sm mb-4">Gourmet sandwiches on freshly baked bread.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                     <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Turkey Club</h4><span class="text-sm text-gray-500 price" data-price="11.00">$11.00</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Italian Sub</h4><span class="text-sm text-gray-500 price" data-price="12.00">$12.00</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>
                
                <!-- Item 9: Desserts -->
                 <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?q=80&w=1974&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Dessert';" alt="Dessert" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Decadent Desserts</h3>
                        <p class="text-gray-600 text-sm mb-4">Sweet treats to end your meal perfectly.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                     <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Chocolate Lava Cake</h4><span class="text-sm text-gray-500 price" data-price="7.50">$7.50</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">New York Cheesecake</h4><span class="text-sm text-gray-500 price" data-price="6.75">$6.75</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>
                
                <!-- Item 10: Drinks -->
                 <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1497515114629-48446e82d0ac?q=80&w=1932&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Drinks';" alt="Drinks" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Beverages</h3>
                        <p class="text-gray-600 text-sm mb-4">Quench your thirst with our selection of drinks.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                     <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Fountain Soda</h4><span class="text-sm text-gray-500 price" data-price="2.50">$2.50</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Iced Tea</h4><span class="text-sm text-gray-500 price" data-price="2.75">$2.75</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>

                 <!-- Item 11: Appetizers -->
                 <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1565895405137-3ca291936c4b?q=80&w=2070&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Appetizers';" alt="Appetizers" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Starters</h3>
                        <p class="text-gray-600 text-sm mb-4">Perfect bites to begin your feast.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                     <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Garlic Bread with Cheese</h4><span class="text-sm text-gray-500 price" data-price="5.50">$5.50</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Crispy Calamari</h4><span class="text-sm text-gray-500 price" data-price="9.00">$9.00</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>

                 <!-- Item 12: Soup -->
                 <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1547592180-85f173990554?q=80&w=2070&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/f97316/ffffff?text=Soup';" alt="Soup" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2">Hearty Soups</h3>
                        <p class="text-gray-600 text-sm mb-4">Warm and comforting bowls of soup.</p>
                        <button class="view-options-btn w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-lg hover:bg-gray-300 transition">View Options ▼</button>
                    </div>
                     <div class="sub-menu max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                         <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">Tomato Basil Soup</h4><span class="text-sm text-gray-500 price" data-price="6.00">$6.00</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                        <div class="border-t p-4 flex justify-between items-center item-details">
                            <div><h4 class="font-semibold item-name">French Onion Soup</h4><span class="text-sm text-gray-500 price" data-price="7.00">$7.00</span></div>
                            <button class="add-to-cart-btn bg-orange-500 text-white font-semibold px-3 py-1 rounded-md text-sm hover:bg-orange-600">+</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Cart Section (Initially Hidden) -->
        <section id="cart-section" class="container mx-auto px-6 py-8 hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Your Shopping Cart</h2>
            <div id="cart-items-container" class="bg-white p-8 rounded-2xl shadow-lg">
                <p id="empty-cart-msg" class="text-gray-500">Your cart is currently empty.</p>
            </div>
            <div id="cart-summary" class="bg-white p-8 rounded-2xl shadow-lg mt-8 hidden">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">Order Summary</h3>
                <div class="flex justify-between items-center mb-4">
                    <span class="text-gray-600">Subtotal</span>
                    <span id="cart-total" class="font-bold text-lg">$0.00</span>
                </div>
                <button id="proceed-to-checkout-btn" class="w-full bg-green-500 text-white font-semibold py-3 rounded-lg hover:bg-green-600 transition">Proceed to Checkout</button>
            </div>
        </section>

        <!-- Checkout Section (Initially Hidden) -->
        <section id="checkout-section" class="container mx-auto px-6 py-8 hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">Checkout</h2>
            <form id="checkout-form" class="grid grid-cols-1 md:grid-cols-2 gap-12">
                <!-- Delivery Details -->
                <div class="bg-white p-8 rounded-2xl shadow-lg">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">Delivery & Payment</h3>
                    <div id="checkout-error-message" class="mb-4 text-red-500 text-sm"></div>
                    <!-- Address -->
                    <div class="mb-4">
                        <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Street Address</label>
                        <input type="text" id="address" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500" required>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="city" class="block text-sm font-medium text-gray-700 mb-1">City</label>
                            <input type="text" id="city" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500" required>
                        </div>
                        <div>
                            <label for="zip" class="block text-sm font-medium text-gray-700 mb-1">ZIP Code</label>
                            <input type="text" id="zip" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500" required>
                        </div>
                    </div>
                    <!-- Payment Method -->
                    <div class="mt-8">
                        <h4 class="text-lg font-semibold text-gray-700 mb-2">Payment Method</h4>
                        <div class="space-y-2">
                             <label class="flex items-center p-3 border rounded-lg has-[:checked]:bg-orange-50 has-[:checked]:border-orange-500">
                                <input type="radio" name="payment-method" value="cod" class="h-4 w-4 text-orange-600 border-gray-300 focus:ring-orange-500" checked>
                                <span class="ml-3 text-sm font-medium text-gray-700">Cash on Delivery</span>
                            </label>
                            <label class="flex items-center p-3 border rounded-lg has-[:checked]:bg-orange-50 has-[:checked]:border-orange-500">
                                <input type="radio" name="payment-method" value="card" class="h-4 w-4 text-orange-600 border-gray-300 focus:ring-orange-500">
                                <span class="ml-3 text-sm font-medium text-gray-700">Credit Card</span>
                            </label>
                             <label class="flex items-center p-3 border rounded-lg has-[:checked]:bg-orange-50 has-[:checked]:border-orange-500">
                                <input type="radio" name="payment-method" value="qr" class="h-4 w-4 text-orange-600 border-gray-300 focus:ring-orange-500">
                                <span class="ml-3 text-sm font-medium text-gray-700">QR Code</span>
                            </label>
                        </div>
                    </div>
                    <!-- Credit Card Info (Hidden by default) -->
                    <div id="credit-card-info" class="mt-6 border-t pt-6 hidden">
                        <div class="mb-4">
                            <label for="card-number" class="block text-sm font-medium text-gray-700 mb-1">Card Number</label>
                            <input type="text" id="card-number" placeholder="•••• •••• •••• ••••" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="card-expiry" class="block text-sm font-medium text-gray-700 mb-1">Expiry Date</label>
                                <input type="text" id="card-expiry" placeholder="MM/YY" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                            </div>
                            <div>
                                <label for="card-cvc" class="block text-sm font-medium text-gray-700 mb-1">CVC</label>
                                <input type="text" id="card-cvc" placeholder="•••" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                            </div>
                        </div>
                    </div>
                     <!-- QR Code Info (Hidden by default) -->
                    <div id="qr-code-info" class="mt-6 border-t pt-6 hidden">
                        <p class="text-sm text-gray-600 mb-4 text-center">Scan the QR code with your payment app to complete the purchase.</p>
                        <img src="https://placehold.co/250x250/ffffff/000000?text=Scan+Me" alt="QR Code for Payment" class="mx-auto rounded-lg shadow-md">
                    </div>
                </div>
                <!-- Order Summary -->
                <div class="bg-white p-8 rounded-2xl shadow-lg h-fit">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Your Order</h3>
                    <div id="checkout-summary-container"></div>
                    <div class="border-t mt-4 pt-4 flex justify-between items-center">
                        <span class="text-gray-800 font-bold text-lg">Total</span>
                        <span id="checkout-total" class="font-bold text-xl text-orange-500">$0.00</span>
                    </div>
                    <button type="submit" class="w-full mt-6 bg-green-500 text-white font-semibold py-3 rounded-lg hover:bg-green-600 transition">Confirm Order</button>
                </div>
            </form>
        </section>
    </div>

    <!-- Success Message Modal -->
    <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-20">
        <div class="bg-white p-8 rounded-2xl shadow-lg text-center max-w-sm mx-auto">
            <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4">
                <svg class="h-6 w-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h3 class="text-lg leading-6 font-medium text-gray-900" id="success-title">Success!</h3>
            <div class="mt-2">
                <p class="text-sm text-gray-500" id="success-message">Your action was completed successfully.</p>
            </div>
            <div class="mt-6">
                <button type="button" id="close-modal-btn" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-orange-500 text-base font-medium text-white hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 sm:text-sm">
                    Got it, thanks!
                </button>
            </div>
        </div>
    </div>
    
    <!-- Order Confirmation Animation Overlay -->
    <div id="order-animation-overlay" class="fixed inset-0 bg-white bg-opacity-95 flex-col items-center justify-center hidden z-30">
        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
            <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
            <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
        </svg>
        <h2 class="text-center text-2xl font-semibold mt-4 text-gray-700">Order Confirmed!</h2>
    </div>

    <!-- Feedback Modal -->
    <div id="feedback-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-40">
        <div class="bg-white p-8 rounded-2xl shadow-lg text-center max-w-md mx-auto transform transition-all" style="opacity: 0; transform: scale(0.95);">
            <h3 class="text-2xl leading-6 font-bold text-gray-900">How was your experience?</h3>
            <p class="mt-2 text-sm text-gray-500">Your feedback helps us improve.</p>
            <div class="mt-6 flex justify-center text-4xl star-rating" id="star-rating-container">
                <span class="star" data-value="1">★</span>
                <span class="star" data-value="2">★</span>
                <span class="star" data-value="3">★</span>
                <span class="star" data-value="4">★</span>
                <span class="star" data-value="5">★</span>
            </div>
            <div class="mt-6">
                <textarea id="feedback-comments" rows="4" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500" placeholder="Tell us more..."></textarea>
            </div>
            <div class="mt-6 flex justify-end space-x-4">
                <button type="button" id="skip-feedback-btn" class="px-4 py-2 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300">Skip</button>
                <button type="button" id="submit-feedback-btn" class="px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600">Submit Feedback</button>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.info("App loaded. User data is stored in localStorage. To clear it for testing, run `localStorage.removeItem('users')` in the console and refresh the page.");
            // --- Page Containers ---
            const authContainer = document.getElementById('auth-container');
            const mainContent = document.getElementById('main-content');
            const menuSection = document.getElementById('menu-section');
            const cartSection = document.getElementById('cart-section');
            const checkoutSection = document.getElementById('checkout-section');

            // --- Form Containers ---
            const loginFormContainer = document.getElementById('login-form');
            const registerFormContainer = document.getElementById('register-form');
            
            // --- Buttons ---
            const showRegisterBtn = document.getElementById('show-register-btn');
            const showLoginBtn = document.getElementById('show-login-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const menuBtn = document.getElementById('menu-btn');
            const cartBtn = document.getElementById('cart-btn');
            const proceedToCheckoutBtn = document.getElementById('proceed-to-checkout-btn');

            // --- Forms & Messages ---
            const loginForm = document.getElementById('login');
            const registerForm = document.getElementById('register');
            const checkoutForm = document.getElementById('checkout-form');
            const registerErrorMessage = document.getElementById('register-error-message');
            const loginErrorMessage = document.getElementById('login-error-message');
            const checkoutErrorMessage = document.getElementById('checkout-error-message');
            const userGreeting = document.getElementById('user-greeting');

            // --- Modal & Animation Elements ---
            const successModal = document.getElementById('success-modal');
            const successTitle = document.getElementById('success-title');
            const successMessage = document.getElementById('success-message');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const orderAnimationOverlay = document.getElementById('order-animation-overlay');
            const feedbackModal = document.getElementById('feedback-modal');
            const feedbackModalContent = feedbackModal.querySelector('div');
            const starRatingContainer = document.getElementById('star-rating-container');
            const feedbackComments = document.getElementById('feedback-comments');
            const submitFeedbackBtn = document.getElementById('submit-feedback-btn');
            const skipFeedbackBtn = document.getElementById('skip-feedback-btn');


            // --- Cart Elements ---
            const cartCount = document.getElementById('cart-count');
            const cartItemsContainer = document.getElementById('cart-items-container');
            const emptyCartMsg = document.getElementById('empty-cart-msg');
            const cartSummary = document.getElementById('cart-summary');
            const cartTotal = document.getElementById('cart-total');
            
            // --- Checkout Elements ---
            const paymentMethodRadios = document.querySelectorAll('input[name="payment-method"]');
            const creditCardInfo = document.getElementById('credit-card-info');
            const qrCodeInfo = document.getElementById('qr-code-info');
            const checkoutSummaryContainer = document.getElementById('checkout-summary-container');
            const checkoutTotal = document.getElementById('checkout-total');

            // --- App State ---
            let cart = [];
            let currentRating = 0;

            // --- View Switching Logic ---
            const showView = (view) => {
                menuSection.classList.add('hidden');
                cartSection.classList.add('hidden');
                checkoutSection.classList.add('hidden');
                if (view === 'menu') {
                    menuSection.classList.remove('hidden');
                } else if (view === 'cart') {
                    cartSection.classList.remove('hidden');
                } else if (view === 'checkout') {
                    updateCheckoutSummary();
                    checkoutSection.classList.remove('hidden');
                }
            };

            menuBtn.addEventListener('click', () => showView('menu'));
            cartBtn.addEventListener('click', () => showView('cart'));
            proceedToCheckoutBtn.addEventListener('click', () => showView('checkout'));

            // --- Form Switching Logic ---
            const switchForms = (showRegister) => {
                if (showRegister) {
                    loginFormContainer.classList.add('opacity-0');
                    setTimeout(() => {
                        loginFormContainer.classList.add('hidden');
                        registerFormContainer.classList.remove('hidden');
                        setTimeout(() => registerFormContainer.classList.remove('opacity-0'), 50);
                    }, 500);
                } else {
                    registerFormContainer.classList.add('opacity-0');
                     setTimeout(() => {
                        registerFormContainer.classList.add('hidden');
                        loginFormContainer.classList.remove('hidden');
                        setTimeout(() => loginFormContainer.classList.remove('opacity-0'), 50);
                    }, 500);
                }
            };

            showRegisterBtn.addEventListener('click', () => switchForms(true));
            showLoginBtn.addEventListener('click', () => switchForms(false));

            // --- Modal Logic ---
            const showSuccessModal = (title, message) => {
                successTitle.textContent = title;
                successMessage.textContent = message;
                successModal.classList.remove('hidden');
            };

            const hideSuccessModal = () => {
                successModal.classList.add('hidden');
            };

            closeModalBtn.addEventListener('click', hideSuccessModal);

            // --- User Authentication using localStorage ---
            const getUsers = () => JSON.parse(localStorage.getItem('users')) || {};
            const saveUsers = (users) => localStorage.setItem('users', JSON.stringify(users));

            // --- Registration Form Validation ---
            registerForm.addEventListener('submit', (e) => {
                e.preventDefault();
                registerErrorMessage.textContent = '';
                const name = document.getElementById('register-name').value.trim();
                const email = document.getElementById('register-email').value.trim();
                const password = document.getElementById('register-password').value;
                const confirmPassword = document.getElementById('confirm-password').value;

                if (!name || !email || !password || !confirmPassword) {
                    registerErrorMessage.textContent = 'All fields are required.';
                    return;
                }
                if (password !== confirmPassword) {
                    registerErrorMessage.textContent = 'Passwords do not match.';
                    return;
                }
                if (password.length < 8) {
                    registerErrorMessage.textContent = 'Password must be at least 8 characters long.';
                    return;
                }
                
                const users = getUsers();
                if (users[email]) {
                    registerErrorMessage.textContent = 'An account with this email already exists.';
                    return;
                }

                users[email] = { name, password };
                saveUsers(users);

                console.log('Registration successful:', { name, email });
                showSuccessModal('Registration Successful!', 'Welcome aboard! You can now log in with your new account.');
                registerForm.reset();
                setTimeout(() => {
                    hideSuccessModal();
                    switchForms(false);
                }, 3000);
            });

            // --- Login Form Submission ---
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                loginErrorMessage.textContent = '';
                const email = document.getElementById('login-email').value.trim();
                const password = document.getElementById('login-password').value;

                if (!email || !password) {
                    loginErrorMessage.textContent = 'Please enter both email and password.';
                    return;
                }

                const users = getUsers();
                const user = users[email];
                
                console.log("--- Login Attempt ---");
                console.log("Attempting to log in with email:", email);
                console.log("Current users in storage:", users);


                if (!user) {
                    console.warn("Login Fail: User not found in localStorage for email:", email);
                    loginErrorMessage.textContent = 'No account found for this email. Please register first.';
                    return;
                }

                console.log("Found user data:", user);
                console.log("Comparing entered password with stored password:", user.password);


                if (user.password !== password) {
                    console.error("Login Fail: Passwords do not match.");
                    loginErrorMessage.textContent = 'Incorrect password. Please try again.';
                    return;
                }
                
                console.log("Login Success: Passwords match!");
                userGreeting.textContent = `Welcome, ${user.name}!`;
                
                showSuccessModal('Login Successful!', 'Taking you to the main page...');

                setTimeout(() => {
                    hideSuccessModal();
                    authContainer.classList.add('opacity-0');
                    setTimeout(() => {
                        authContainer.classList.add('hidden');
                        mainContent.classList.remove('hidden');
                        setTimeout(() => mainContent.classList.remove('opacity-0'), 50);
                    }, 500);
                }, 1500);
            });

            // --- Logout Logic ---
            logoutBtn.addEventListener('click', () => {
                mainContent.classList.add('opacity-0');
                setTimeout(() => {
                    mainContent.classList.add('hidden');
                    authContainer.classList.remove('hidden');
                    setTimeout(() => authContainer.classList.remove('opacity-0'), 50);
                    loginForm.reset();
                    cart = []; // Clear cart on logout
                    updateCart();
                    showView('menu'); // Reset to menu view
                }, 500);
            });

            // --- Cart Functionality ---
            function updateCart() {
                cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
                
                if (cart.length === 0) {
                    emptyCartMsg.classList.remove('hidden');
                    cartSummary.classList.add('hidden');
                    cartItemsContainer.innerHTML = ''; 
                    cartItemsContainer.appendChild(emptyCartMsg);
                } else {
                    emptyCartMsg.classList.add('hidden');
                    cartSummary.classList.remove('hidden');
                    cartItemsContainer.innerHTML = ''; 
                    let total = 0;
                    cart.forEach(item => {
                        total += item.price * item.quantity;
                        const cartItemEl = document.createElement('div');
                        cartItemEl.className = 'flex justify-between items-center border-b py-4';
                        cartItemEl.innerHTML = `
                            <div>
                                <h4 class="font-bold">${item.name}</h4>
                                <p class="text-sm text-gray-600">$${item.price.toFixed(2)}</p>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="font-semibold">Qty: ${item.quantity}</span>
                            </div>
                        `;
                        cartItemsContainer.appendChild(cartItemEl);
                    });
                    cartTotal.textContent = `$${total.toFixed(2)}`;
                }
            }

            document.body.addEventListener('click', function(e) {
                // Handle adding items to cart
                if (e.target.matches('.add-to-cart-btn')) {
                    const itemDetails = e.target.closest('.item-details');
                    const name = itemDetails.querySelector('.item-name').textContent;
                    const price = parseFloat(itemDetails.querySelector('.price').dataset.price);

                    const existingItem = cart.find(item => item.name === name);
                    if (existingItem) {
                        existingItem.quantity++;
                    } else {
                        cart.push({ name, price, quantity: 1 });
                    }
                    
                    updateCart();
                    showSuccessModal('Added to Cart!', `${name} has been added to your cart.`);
                    setTimeout(hideSuccessModal, 1500);
                }

                // Handle toggling sub-menus
                if (e.target.matches('.view-options-btn')) {
                    const subMenu = e.target.parentElement.nextElementSibling;
                    if (subMenu.style.maxHeight) {
                        subMenu.style.maxHeight = null;
                        e.target.textContent = 'View Options ▼';
                    } else {
                        subMenu.style.maxHeight = subMenu.scrollHeight + "px";
                        e.target.textContent = 'Hide Options ▲';
                    }
                }
            });


            // --- Checkout Functionality ---
            paymentMethodRadios.forEach(radio => {
                radio.addEventListener('change', (e) => {
                    creditCardInfo.classList.add('hidden');
                    qrCodeInfo.classList.add('hidden');

                    if (e.target.value === 'card') {
                        creditCardInfo.classList.remove('hidden');
                    } else if (e.target.value === 'qr') {
                        qrCodeInfo.classList.remove('hidden');
                    }
                });
            });

            function updateCheckoutSummary() {
                checkoutSummaryContainer.innerHTML = '';
                let total = 0;
                cart.forEach(item => {
                    total += item.price * item.quantity;
                    const summaryItemEl = document.createElement('div');
                    summaryItemEl.className = 'flex justify-between items-center py-2 text-sm';
                    summaryItemEl.innerHTML = `
                        <span class="text-gray-600">${item.name} x ${item.quantity}</span>
                        <span class="font-medium">$${(item.price * item.quantity).toFixed(2)}</span>
                    `;
                    checkoutSummaryContainer.appendChild(summaryItemEl);
                });
                checkoutTotal.textContent = `$${total.toFixed(2)}`;
            }

            checkoutForm.addEventListener('submit', (e) => {
                e.preventDefault();
                checkoutErrorMessage.textContent = '';

                // --- Basic Validation ---
                const address = document.getElementById('address').value.trim();
                const city = document.getElementById('city').value.trim();
                const zip = document.getElementById('zip').value.trim();
                const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;

                if (!address || !city || !zip) {
                    checkoutErrorMessage.textContent = 'Please fill in all address fields.';
                    return;
                }

                if (paymentMethod === 'card') {
                    const cardNumber = document.getElementById('card-number').value.trim();
                    const cardExpiry = document.getElementById('card-expiry').value.trim();
                    const cardCvc = document.getElementById('card-cvc').value.trim();
                    if (!cardNumber || !cardExpiry || !cardCvc) {
                        checkoutErrorMessage.textContent = 'Please fill in all credit card details.';
                        return;
                    }
                }

                // --- If validation passes, show animation ---
                orderAnimationOverlay.classList.remove('hidden');
                orderAnimationOverlay.classList.add('flex');

                setTimeout(() => {
                    orderAnimationOverlay.classList.add('hidden');
                    orderAnimationOverlay.classList.remove('flex');
                    showFeedbackModal();
                }, 2500); // Wait for animation to finish
            });

            // --- Feedback Modal Logic ---
            function showFeedbackModal() {
                feedbackModal.classList.remove('hidden');
                setTimeout(() => {
                    feedbackModalContent.style.opacity = '1';
                    feedbackModalContent.style.transform = 'scale(1)';
                }, 50);
            }

            function hideFeedbackModal() {
                feedbackModalContent.style.opacity = '0';
                feedbackModalContent.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    feedbackModal.classList.add('hidden');
                    // Reset everything and go back to menu
                    cart = [];
                    updateCart();
                    checkoutForm.reset();
                    creditCardInfo.classList.add('hidden');
                    qrCodeInfo.classList.add('hidden');
                    showView('menu');
                }, 300);
            }

            starRatingContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('star')) {
                    currentRating = e.target.dataset.value;
                    const stars = [...starRatingContainer.querySelectorAll('.star')];
                    stars.forEach(star => {
                        star.classList.remove('selected');
                        if(star.dataset.value <= currentRating) {
                            star.classList.add('selected');
                        }
                    });
                }
            });

            submitFeedbackBtn.addEventListener('click', () => {
                const comments = feedbackComments.value.trim();
                console.log('--- Feedback Submitted ---');
                console.log('Rating:', currentRating);
                console.log('Comments:', comments);
                showSuccessModal('Thank You!', 'Your feedback has been submitted.');
                setTimeout(() => {
                    hideSuccessModal();
                    hideFeedbackModal();
                }, 2000);
            });

            skipFeedbackBtn.addEventListener('click', hideFeedbackModal);

        });
    </script>

</body>
</html>
